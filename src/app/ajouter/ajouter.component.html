<div class="ajout-endroit-container">
  <div class="form-box">
    <button class="close-btn" (click)="resetForm()">&times;</button>
    <img src="assets/logopr.jpg" alt="Zemni Logo" class="logo" />

    <!-- Messages -->
    <p *ngIf="errorMessage" class="error">{{ errorMessage }}</p>
    <p *ngIf="successMessage" class="success">{{ successMessage }}</p>

    <h2>Ajouter un élément</h2>
    <p class="subtext">Veuillez introduire des données valides !</p>

    <form (ngSubmit)="onSubmit()" #carteForm="ngForm">
      <!-- Choix de la catégorie -->
      <label for="categorie">Catégorie</label>
      <select 
        id="categorie" 
        [(ngModel)]="nouvelleCarte.categorie" 
        name="categorie" 
        required
      >
        <option value="" disabled>-- Choisir une catégorie --</option>
        <option value="patrimoine">Patrimoine</option>
        <option value="restauration">Restauration</option>
        <option value="gastronomie">Gastronomie</option>
        <option value="vetements">Vêtements</option>
      </select>

      <!-- Nom -->
      <label for="nom">Nom</label>
      <input
        id="nom"
        type="text"
        [(ngModel)]="nouvelleCarte.nom"
        name="nom"
        placeholder="Nom"
        required
      />

      <!-- Description -->
      <label for="description">Description</label>
      <textarea
        id="description"
        [(ngModel)]="nouvelleCarte.description"
        name="description"
        placeholder="Brève description"
        required
      ></textarea>

      <!-- Adresse -->
      <label for="adresse">Adresse</label>
      <input
        id="adresse"
        type="text"
        [(ngModel)]="nouvelleCarte.adresse"
        name="adresse"
        placeholder="Rue, ville, etc."
        required
      />

      <!-- URL de l'image -->
      <label for="imageUrl">URL de l'image</label>
      <input
        id="imageUrl"
        type="url"
        [(ngModel)]="nouvelleCarte.imageurl"
        name="imageurl"
        placeholder="http://www.domain.com/image.jpg"
        required
      />

      <!-- Prix (conditionnel) -->
      <div *ngIf="showPrixField">
        <label for="prix">Prix (en DT)</label>
        <input
          type="number"
          id="prix"
          [(ngModel)]="nouvelleCarte.prix"
          name="prix"
          placeholder="Ex : 25"
          step="0.01"
          required
        />
      </div>

      <!-- Boutons -->
      <div class="button-group">
        <button 
          type="button" 
          class="cancel-btn" 
          (click)="resetForm()"
        >
          <i class="fas fa-times-circle"></i> Annuler
        </button>
        <button 
          type="submit" 
          class="add-btn" 
          [disabled]="isSubmitting"
        >
          <i class="fas fa-plus-circle"></i> 
          {{ isSubmitting ? 'En cours...' : 'Ajouter' }}
        </button>
      </div>
    </form>
  </div>
</div>